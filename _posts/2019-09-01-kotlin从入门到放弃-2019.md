---
layout:     post
title:      "Kotlin学习笔记4"
subtitle:   "Functions and Lambdas"
date:       2019-09-01 16:38:00
author:     "LeoHe"
header-img: "img/post-bg-2015.jpg"
tags:
    - Kotlin
---



[TOC]

# Kotlin Funcitons and Lambdas

## Functions

### Function  declaration

format

```
fun <function name>(<p1: Type, p2: Type ...>) : <return type> {
	// <body>
}
```

### Function usage

```kotlin
fun double (x: Int): Int = 2 * x
val result = double(2)
```

Calling memeber functions uses the dot notation

```kotlin
Stream().read()
```

#### Parameters

Function parameters are defined using Pascal notation, i.e. *name*: *type*. Parameters are separated using commas. Each parameter must be explicitly typed:

```kotlin
fun powerOf(number: Int, exponent: Int) {
  
}
```

#### Default Arguments  

Function parameters can have default values, which are used when a corresponding argument is omitted. This allows for a reduced number of overloads compared to other languages:

方法参数都能够有默认的值

```kotlin
fun read(b: Array<Byte>, off: Int = 0, len: Int = b.size){}
```

Default values are defined using the **=** after type along with the value.

Overriding methods always use the same default parameter values as the base method. When overriding a method with default parameter values, the default parameter values must be omitted from the signature:

```kotlin
open class A {
  open fun foo(i: Int = 10){}
}

class B : A() {
  override fun foo(i: Int){}
}
```

If a default parameter precedes a parameter with no default value, the default value can only be used by calling the function with [named arguments](https://kotlinlang.org/docs/reference/functions.html#named-arguments):

```kotlin
fun foo(bar: Int = 0, baz: Int) {}
foo(baz = 1)  //the default value bar = 0 is used
```

If the last argument after default parameters is a [lambda](https://kotlinlang.org/docs/reference/lambdas.html#lambda-expression-syntax), it can be passed in either as a named argument or [outside the parentheses](https://kotlinlang.org/docs/reference/lambdas.html#passing-a-lambda-to-the-last-parameter):

```kotlin
fun foo(bar: Int = 0, baz: Int = 1, qux: () -> Unit) { /*...*/ }

foo(1) { println("hello") }     // Uses the default value baz = 1
foo(qux = { println("hello") }) // Uses both default values bar = 0 and baz = 1 
foo { println("hello") }  / Uses both default values bar = 0 and baz = 1
```



#### Named Arguments

Function parameters can be named when calling functions. This is very convenient when a function has a high number of parameters or default ones.

Given the following function:

```kotlin
fun reformat(str: String, 
            normalizedCase: Boolean = true,
            upperCaseFirstLetter: Boolean = true,
            divideByCamelHumps: Boolean = false,
            wordSeparator: Char = ' '){}
```



We could call this using default arguments: 

```kotlin
reformat(str)
```

However, when calling it with non-default, the call would look something like:

```kotlin
reformat(str, true, true, false, '_')
```

With named arguments we can make the code much more readable: 

```kotlin
reformat(str,
    normalizeCase = true,
    upperCaseFirstLetter = true,
    divideByCamelHumps = false,
    wordSeparator = '_'
)
```

and if we do not need all arguments:

```kotlin
reformat(str, wordSeparator = '_')
```

