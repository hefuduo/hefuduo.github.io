---
layout:     post
title:      "数组"
subtitle:   "template"
date:       2016-12-21 19:38:00
author:     "LeoHe"
header-img: "img/post-bg-2015.jpg"
tags:
    - Java	
---

[TOC]

# 16 数组

## 16.1数组为什么特殊

Java中有大量的其他方式可以持有对象。数组与其他种类的容器之间的区别有三个方面：**效率，类型和保存基础类型的能力**。

在Java中，数组是一种效率最高的存储和时机访问对象引用序列的方式。

## 16.2 数组是第一级对象

无论使用哪种类型的数组，数组标识符其实只是一个引用，指向堆中创建的一个真实对象，这个数组对象泳衣保存指向其他对象的引用。

## 16.3 返回一个数组

假设你要写一个方法，而且希望它返回的不止一个值，而是一组值，这个对于C和C++这样的

语言来说就有点困难，因为他们不能返回一个数组，而只能返回指向数组的指针。这会造成一些问题，因为它是的控制数组的生命周期造成困难，并且容易造成*内存泄漏*。

在Java中，你只是直接“返回一个数组”，而无需担心要为数组负责-只要你需要它，它就会一直存在，当你使用完后，垃圾回收器会清理掉他。

## 16.4 多维数组

创建多维数组很方便，对于基本类型的多维素组，可以使用花括号将每个向量分隔开：

```java
public class MultidimensionPrimitiveArray{
  public static void main(String[] args){
    int[][] a = {
      {1, 2, 3},
        {4,5,6}
    }
  }
}
//是这样婶的	
```



## 16.6 数组与泛型

> 通常,数组与泛型不能很好的结合。你不能实例化具有参数化类型的数组。Java泛型的类型擦除会移除类型信息，而数组必须知道他们所持有的确切类型，以强制保证类型安全。但是，你可以参数化数组本身的类型。

```java
class ClassParameter<T>{
  public T[] f(T[] arg){
    return arg;
  }
  
  class MethodParameter{
    public static <T> T[] f(T[] arg){
      return arg;
    }
  }
  
  public class ParamterizedArrayType{
    public static void main(String[] args){
      Integer[] ints = {1,2,3,4,5};
      Double[] doubles = {1.1, 1.2, 2.2, 3.3};
      Integer[] ints2 = new ClassParameter<Integer>().f(ints);
      Double[] doubles2 = new Classparameter<Double>()f(doubles);
      ints2 = MethodsParameter.f(ints);
      double2 = MethodParamter.f(doubles);
    }
  }
}
```

注意，使用参数化方法而不使用参数化类的方便之处在于：你不必为需要应用的每种不同的类型都使用一个参数去实例化这个类，并且你可以将其定义为静态的。当然没你不能总是选择使用参数化方法而不是参数化类，但是它应该成为首选。



## 16.7 Arrays使用功能

在java.util类库中可以找到Array类，他有一套用于数组的static使用方法，其中有六个基本方法。

### 16.7.1 复制数组

Java标准类库提供有static方法，`System.arrayCopy()`用它复制数组比用for循环复制要快很多。

```java
int[] i = new int[7];
int[] j = new int[10];

System.arrayCopy(i,0,j,0,i.length);

//函数原型，我觉得应该是内存操作，这样肯定比for循环赋值要快多了。
   public static native void arraycopy(Object src,  int  srcPos,
                                        Object dest, int destPos,
                                        int length);
```



### 16.7.2 数组的比较

Arrays类提供了重载后的`equals()`方法，用来比较整个数组。同样，此方法针对所有基本类型与Object都做了重载，数组相等的条件是元素的个数*必须相等，并且对应的未知的元素也相等。

###  16.7.3 数组元素的比较

排序必须根据对象的实际类型执行比较操作。一种自然的解决方案是为每种不同的类型各市县一个不同的排序方法，但是这样的代码难以被新的类型所复用。

自然而然想到的方式就是策略模式。



### 16.7.4 数组的排序

使用内置的排序方法，就可以对任意的基本类型数组进行排序，也可以对任意的对象数组进行排序，只要该对象实现了comparable接口或具有相关联的Comparator。

### 16.7.5 在已排序的数组中查找

如果数组已经排好序列了，那么可以使用`Array.binarySearch()`来执行二分查找。



## 16.8 总结

Java中对尺寸固定的低级数组做了一些适度的支持，这种数组强调的是性能而不是灵活性，并且与C和C++中的数组模型类似。



