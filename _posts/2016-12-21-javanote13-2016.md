---
layout:     post
title:      "Java学习笔记13"
subtitle:   "字符串"
date:       2017-4-31 18:38:00
author:     "LeoHe"
header-img: "img/post-bg-2015.jpg"
tags:
    - Java
---

# 第13章 字符串

> 字符串操作是计算机程序设计中最常见的行为🌹。

### 13.1 不可变字符串

String对象是不可变的，String类中的每一个看起来会修改String值得方法们实际上都是创建了一个全新的String对象，以包含修改后的字符串内容，而最初的String对象没有改变。

String对象作为函数参数，实际上都会复制一份引用，而该引用所指的对象一直待在单一的物理位置上（内存），不会改变。

### 13.2 重载 + 号和StringBuilder

String对象是不可变的，你可以给一个String对象加各种别名（指的是引用），因为String对象的只读特性，所以指向它的任何引用都不可能改变它的值。因此，也就不会对其他的引用有什么影响。

不可变性也会带来一定的效率问题。为String对象重载的“+”操作符。其可以用来连接String



```java
public class Concatenatuion{
  public static void main(String[] args){
    String mango = "mango";
    String s = "abc" + mango + "def" + 47;
    sout(s);
  }
}
```

这段代码可能是这样工作的：String可能有一个append（）<u>事实上是有的</u>它会重新生成一个String对象，来包含“abc”和mango连接后的字符串。然后依次类推知道最终的字符串。

这种工作方式是可以的，但是为了生成最终的字符串，这种方式会产生一大丢需要垃圾回收的中间对象。

如果想看看上面的代码是如何工作的，可以用JDK自带的工具javap来反编译以上的代码

​    `javap -c Concatenation`

这里的-c标志标识将生成JVM字节码。

最终的实现原理是创建了一个StringBuilder类型的对象，用以构造最终的字符串。并且为每个字符串调用一次StringBuilder的append（），总计4次并最终调用toString（）方法生成结果。



综上所述：

==当你为一个类编写toString()方法时，如果字符串操作比较简单，那么可以依赖编译器的优化，它最终会为你合理的构造字符串结果，但是如果你要在toString的方法中使用循环，那么最好的是自己创建一个StringBuilder对象，用它来构造最终的结果，这样性能会更好一些。==

### 13.3 格式化说明符

> 在插入数据的时候，如果想咬扣工资空格与对齐，你需要更精细复杂的格式修饰符。

抽象语法：



`%[argument_index\$][flags][width][.precision]conversion`

| 类型转换字符 |           |
| ------ | --------- |
| d      | 整形        |
| c      | unicode   |
| b      | boolean   |
| s      | String    |
| f      | float     |
| e      | 科学计算      |
| x      | 整数（16进制）  |
| h      | 哈希码（16进制） |
| %      | 字符%       |

### 13.4 正则表达式

//TODO 详见Java正则表达式

[Java正则表达式](https://hefuduo.github.io/hefuduo.github.io/2017/03/31/JavaRegulation-2017/)