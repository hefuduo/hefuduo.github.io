---
layout:     post
title:      "Groovyä¹‹é—­åŒ…"
subtitle:   "Closure"
date:       2017-08-22 17:38:00
author:     "LeoHe"
categories: ç¼–ç¨‹è¯­è¨€
header-img: "img/post-bg-2015.jpg"
tags:
    - Groovy	
---

[TOC]

# é—­åŒ…

é—­åŒ…æ˜¯ä¸€ç§å¯æ‰§è¡Œçš„ä»£ç å—çš„æ–¹æ³•ï¼Œé—­åŒ…ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå¯ä»¥æƒ³æ–¹æ³•ä¸€æ ·ä¼ é€’å‚æ•°ã€‚ç”±äºé—­åŒ…æ˜¯ä»£ç å—ï¼Œå› æ­¤ä¹Ÿå¯ä»¥åœ¨éœ€è¦æ—¶æ‰§è¡Œã€‚å®šä¹‰é—­åŒ…çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ã€‚é—­åŒ…å¯ä»¥è®¿é—®å±æ€§ä¿¡æ¯ï¼Œæ„å‘³ç€å¯ä»¥è®¿é—®å¹¶ä¿®å…¶ä½œç”¨äºå†…çš„æ‰€æœ‰å˜é‡å€¼ã€‚

## é—­åŒ…

```groovy
def greeting = 'hello'
def clos = {
    param ->
        println "$greeting $param"
}

clos.call("world")

greeting = 'welcome'
clos.call('world')

def demo(clos){
    def greeting = 'Bonjour'//this will not affect closure
    clos.call('ken')
}

demo(clos)   //output welcome ken
```

ä»¥ä¸Šä»£ç è¯´æ˜ï¼Œåªæœ‰é—­åŒ…è¢«å®šä¹‰ä¸”å­˜åœ¨ï¼Œè€Œä¸æ˜¯åœ¨è¢«è°ƒç”¨æ—¶ï¼Œå¯ä»¥è®¿é—®å…¶çŠ¶æ€å€¼ã€‚

 é—­åŒ…ä¹Ÿå¸¸ç”¨åœ¨é›†åˆä¸­ã€‚ä½¿ç”¨é—­åŒ…å¯ä»¥æ›´é«˜æ•ˆçš„éå†å…ƒç´ ã€‚

```groovy
1.upto(10,{
    println it 
})
//æˆ–è€…ä½ ä¹Ÿå¯ä»¥è¿™ä¹ˆå†™
1.upto(10){
    println it
}
```

```groovy
//é˜¶ä¹˜
def fac = 1
1.upto(5){
    num ->
        fac *= num
}

println "Factorical : $fac"
```

## é—­åŒ…ä¸é›†åˆå’Œå­—ç¬¦ä¸²

å¸¸ç”¨eachæ–¹æ³•æ¥éå†ã€‚

`find()è¿”å›ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼ŒfindAll()è¿”å›æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ `

```groovy
def list = [1, 2, 3, 4, 5, 6, 7, 8, 9]
list.findAll {
    it > 5
}.each {
    println it
}
```



`any() and every()`

```groovy
def list = [1, 2, 3, 4, 5, 6, 7, 8, 9]

def anyEle = list.any {
    it > 5
}
println anyEle //true

def everyEle = list.every {
    it > 5
}

println everyEle  //false
```



`collect() and inject`

collectç”¨æ¥éå†é›†åˆå¹¶ä¸”è¿”å›ä¸€ä¸ªé›†åˆ

```groovy

def list = [1, 2, 3, 4, 5, 6, 7, 8, 9]

//collect è¿”å›ä¸€ä¸ªç”±closureè½¬æ¢åçš„é›†åˆ
def newlist = list.collect {
    it * it
}

println newlist

//collect çš„é«˜çº§èŒƒä¾‹
def doubles = {
    item ->
        2 * item
}

def triples = {
    item ->
        3 * item
}

def isEven = {
    item -> 
        item%2 == 0
}
def map(clos,list){
    return list.collect(clos)
}
```



`injectç”¨æ¥éå†é›†åˆï¼Œé¦–å…ˆå°†éœ€è¦ä¼ é€’çš„å€¼å’Œé›†åˆé¡¹ç›®ä¼ é€’ç»™å¿…æŠ¥ï¼Œæ­¤æ—¶å…¶ä¼ é€’çš„å€¼å°†ä½œä¸ºå¤„ç†ç»“æœï¼Œç„¶åå†å’Œä¸‹ä¸€ä¸ªé›†åˆé¡¹ç›®ä¸€èµ·ä¼ é€’ç»™é—­åŒ…ï¼Œä»¥æ­¤ç±»æ¨`

```groovy
def factorial = [2, 3, 4, 5]
        .inject(1) {
    previous, element ->
        previous * element
}

println factorial
//=====
def list = [2, 3, 4, 5]
factorial = list.inject(1) {
    prviouse, element ->
        prviouse * element
}
println factorial
//=====
def list = [2, 3, 4, 5]
def closure = {
    previous, element ->
        previous * element
}

def factorial = list.inject (1,closure)
println factorial
```



## é—­åŒ…çš„å…¶ä»–ç‰¹æ€§

ç”±äºé—­åŒ…ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå› æ­¤å®ƒå¯ä»¥ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªé—­åŒ…çš„å‚æ•°ã€‚

### ä½œä¸ºæ–¹æ³•çš„å‚æ•°

```groovy
def filter(list, predict) {
    return list.findAll(predict)
}

def isEven = {
    x ->
        return x % 2 == 0
}

def isOdd = {
    x ->
        return !isEven(x)
}

def table = [11, 12, 13, 14]

def evens = filter(table,isEven)
println evens

def odds = filter(table,isOdd)
println odds
```



### ä½œä¸ºå¦ä¸€ä¸ªé—­åŒ…çš„å‚æ•°

```groovy
def takewhile = {
    predicate, list ->
        def result = []
        for (element in list) {
            if (predicate(element)) {
                result << element
            } else {
                return result
            }
        }
}

def isEven = {
    x ->
        return x % 2 == 0
}

def isOdd = {
    x ->
        return !isEven(x)
}

def table1 = [12, 14, 15, 18]
def table2 = [11, 13, 15, 16, 18]

def evens = takewhile.call(isEven,table1)
println evens
```



### ä½œä¸ºè¿”å›å€¼

```groovy
def multiply(x){
    return {
        y->
            return x * y
    }
}

def twice = multiply(2)

println twice(4)
```



### åµŒå¥—é—­åŒ…

#### é€‰æ‹©æ’åºç®—æ³•çš„å®ç°

```groovy
def selection = {
    list ->
  //äº¤æ¢ä¸¤ä¸ªä½ç½®çš„æ•°
        def swap = {
            sList, p, q ->
                def temp = sList[p]
                sList[p] = sList[q]
                sList[q] = temp
        }
  //æ‰¾å‡ºæœ€å°æ•°ä½ç½®
        def minimumPosition = {
            pList, from ->
                def mPos = from
                def nextFrom = 1 + from
                for (j in nextFrom..<pList.size) {
                    if (pList[j] < pList[mPos]) {
                        mPos = j
                    }
                }
                return mPos
        }
        def size = list.size() - 1
        for (k in 0..<size) {
            def minPos = minimumPosition(list, k)
            swap(list, minPos, k)
        }
        return list
}

def table = [13, 14, 12, 11, 14]
def sorted = selection(table)
println sorted
```



# å…³äºé—­åŒ…çš„æ›´å¤šä¿¡æ¯

## é—­åŒ…å’Œä¸ç¡®å®šæ€§

å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼Œé—­åŒ…åœ¨å®å‚åˆ—è¡¨å¤–éƒ¨ã€‚å¦‚æœæ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°æ˜¯é—­åŒ…ï¼Œé‚£ä¹ˆå¯ä»¥å°†å®ƒä»å®å‚åˆ—è¡¨ä¸­åˆ é™¤ï¼Œå¹¶æ”¾åœ¨æ°”å€™çš„æ‹¬å·åé¢ã€‚

`demo(closure) å˜ä¸º demo closure`

```groovy
def greeting = 'Hello'
def clo = {
    param ->
        println "$greeting $param"
}

def demo(clos) {
    def greeting = 'Bonjour'
    clos.call('Ken')
}
//demo()clo error null point exception,è§£é‡Šè§åã€‚
 
demo clo

demo() {
    param ->
        println "welcome $param"
}


```



å‡è®¾`clos`æ˜¯ä¸€ä¸ªé—­åŒ…å˜é‡ï¼Œ`{...}`æ˜¯ä¸€ä¸ªé—­åŒ…ä½“ã€‚å‡è®¾`x`å’Œ`y`æ˜¯ä¸¤ä¸ªéšæ„è®¾ç½®çš„å€¼ï¼Œåˆ™æŸ¥çœ‹å¦‚ä¸‹ä¸åŒçš„æ–¹æ³•è°ƒç”¨è¯­å¥ï¼š

```groovy
method(x,y,{...}) //ok
method(x,y){...} //ok
method(x,y,clos) //ok
method(x,y)clos //error no such method
```



ç¬¬äºŒè¡Œä»£ç æŠŠé—­åŒ…ä½“ç›´æ¥æ”¾åœ¨è°ƒç”¨å‚æ•°çš„åé¢ã€‚ç¬¬å››è¡Œä»£ç è¯´æ˜ï¼ŒåŒæ ·çš„åšæ³•ä¹Ÿè®¸ä¸é€‚ç”¨é—­åŒ…å˜é‡ã€‚Groovyè§£é‡Šå™¨æ— æ³•å¿å†¬closæ ‡è¯†ç¬¦æ˜¯è¯¥æ–¹æ³•çš„è°ƒç”¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤Groovyè§£é‡Šå™¨å°±ä¼šæŠ¥é”™ï¼Œè¯´æ˜æ‰¾ä¸åˆ°åªæœ‰å…·æœ‰ä¸¤ä¸ªå‚æ•°çš„methodæ–¹æ³•ã€‚

å¦‚æœmethodæ ‡è¯†å…·æœ‰ä¸€ä¸ªå‚æ•°çš„æ–¹æ³•ï¼š

```groovy
def method(c){
  ...
}
```

åˆ™closæ˜¯ä¸ªé—­åŒ…å˜é‡ï¼Œ{â€¦}æ˜¯é—­åŒ…ä½“ï¼Œå¦‚ä¸‹è°ƒç”¨è¯­å¥

```groovy
method({...})  //ok
method(){...}  //ok
method{...}    //ok	
method(clos)   //ok
method()clos   //error null point exception 
method clos    //ok
```

ç¬¬äº”è¡Œä»£ç ä¸­ï¼Œè°ƒç”¨æ–¹æ³•æ—¶ä¸é€‚ç”¨ä»»ä½•å®å‚ï¼Œåœ¨è¯¥æ–¹æ³•ä½“ä¸­ï¼Œå½¢å‚å°†è¢«åˆå§‹åŒ–ä¸ºnullï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­ä½¿ç”¨é—­åŒ…å˜é‡å°†ä¼šå¯¼è‡´ç³»ç»Ÿé”™è¯¯ã€‚



## é—­åŒ…å’Œæ–¹æ³•

å¯¹äºå¦‚ä¸‹ä¸¤ä¸ªç»“æ„

```groovy
def mDouble = {
    n ->
  		return 2*n
}

def mDouble(n){
    return 2*n
}
```

å‰è€…æ˜¯ä¸€ä¸ªé—­åŒ…å®šä¹‰ï¼Œåè€…æ˜¯ä¸€ä¸ªæ–¹æ³•å®šä¹‰ã€‚æ³¨æ„ï¼Œä»»ä½•é—­åŒ…å¼•ç”¨è‚¯å®šæœ‰å›ºå®šçš„ä½œç”¨åŸŸã€‚ä¸èƒ½å‡ºç°åŒåçš„é—­åŒ…å˜é‡ï¼Œä½†æ˜¯å¯ä»¥å‡ºç°åŒåæ–¹æ³•ï¼ˆæ–¹æ³•é‡è½½ï¼‰



## é»˜è®¤å‚æ•°

åƒæ–¹æ³•ä¸€æ ·ï¼Œé—­åŒ…ä¹Ÿå¯ä»¥è¢«åˆ†é…å¸¦é»˜è®¤å€¼çš„å‚æ•°ã€‚

```groovy
def greeting = {
    msg, name = "leo" ->
        println "$msg $name"
}

greeting("hello ")
greeting("hello", "julia")
```

## é—­åŒ…å’Œä½œç”¨åŸŸ

ä¸Šé¢è®²åˆ°çš„å±€éƒ¨é—­åŒ…å®ç°çš„é€‰æ‹©æ€§æ’åºç®—æ³•ã€‚ä¸‹é¢è®²ä¸€ä¸ªä½¿ç”¨å†’æ³¡ç®—æ³•æ’åºã€‚

```groovy
def bubbleSort = {
    list ->
        def swap = {
            sList, p, q ->
                def temp
                temp = sList[q]
                sList[q] = sList[p]
                sList[p] = temp
        }

        def size = list.size()
        def sortedPosition = 0

        while (sortedPosition < size) {
            for (index in 1..<(size - sortedPosition)) {
                if (list[index] < list[index - 1])
                    swap(list, index, index - 1)
            }
            sortedPosition ++ 
        }
        return list
}

def list = [1,5,4,6,2,7,0,78,54,23]
bubbleSort(list)
println list
```

éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé—­åŒ…åªèƒ½ç”±è¯­å¥ç»„æˆï¼Œè¿™æ„å‘³ç€é—­åŒ…ä¸­ä¸èƒ½æœ‰æ–¹æ³•å®šä¹‰ï¼Œå› æ­¤å±€éƒ¨é—­åŒ…swapä¸èƒ½ä½¿ç”¨æ–¹æ³•å®šä¹‰æ¥æ›¿ä»£ã€‚

## é€’å½’é—­åŒ…

ç”¨é€’å½’çš„æ–¹æ³•æ±‚`n!`

```groovy
def factorial = {
    n ->
        return n == 0 ? 1 : n * call(n - 1)
}

println factorial(5)
```

## çŠ¶æ€ç±»å‹

å¯ä»¥ä½¿ç”¨å‚æ•°å’Œè¿”å›å€¼çš„åŠ¨æ€ç±»å‹æ¥å®šä¹‰é—­åŒ…ã€‚è¿™ä¸ªç‰¹æ€§ä½¿å¾—é—­åŒ…æ›´åŠ é€šç”¨ã€‚

### é—­åŒ…çš„åŠ¨æ€ç±»å‹

```groovy
def times = {
    x, y ->
        return x * y
}

def times = {
    x, y ->
        return x * y
}

println times(3,4)
println times(3.2,4.15)
println times('hello',4)
```

åœ¨è°ƒç”¨æ—¶ï¼Œæ‰ç¡®å®šxå’Œyçš„ç±»å‹

```console
12
13.280
hellohellohellohello
```

### é™æ€æŒ‡å®šå‚æ•°ç±»å‹çš„é—­åŒ…

```groovy
def times = {
    Number x, Number y ->
        return x * y
}
```

è¿™ç§æ–¹å¼å°±é™å®šäº†é—­åŒ…çš„å‚æ•°ç±»å‹ï¼Œä¸èƒ½æ˜¯NumberåŠå…¶å­ç±»æ„å¤–çš„å…¶ä»–ç±»å‹ã€‚



## æœ‰å…³å®å‚çš„çº¦å®š

åœ¨è°ƒç”¨é—­åŒ…æ—¶ï¼Œå®å‚çš„æ•°é‡å¿…é¡»ä¸¥æ ¼åŒ¹é…é—­åŒ…å®šä¹‰æ—¶çš„å½¢å‚æ•°é‡ã€‚å¦åˆ™ï¼ŒGroovyè§£é‡Šå™¨å°±ä¼šæŠ¥é”™ï¼ŒæŒ‡ç¤ºå‚æ•°ä¸æ­£ç¡®ã€‚

```groovy
def clos = {
    a,b,c ->
   "clos($a$b$c)"
}

clos(1,2,3) //ok
clos(1) //error
clos(1,2,3,4) //error
```



## é—­åŒ…ã€é›†åˆã€èŒƒå›´

åˆ—è¡¨ã€æ˜ å°„ã€å’ŒèŒƒå›´ç­‰ç±»å‹æä¾›å¾ˆå¤šå®ç”¨é—­åŒ…ä½œä¸ºå‚æ•°çš„æ–¹æ³•ï¼Œè¿™æœ‰åˆ©äºè¿­ä»£å¤„ç†é›†åˆæˆ–è€…èŒƒå›´ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æ‰§è¡ŒæŒ‡å®šçš„ä»»åŠ¡ã€‚

è¿­ä»£å™¨æ–¹æ³•

| æ–¹æ³•åç§°          | è¯´æ˜   |
| ------------- | ---- |
| any\*         |      |
| collect\*     |      |
| collect\*     |      |
| each\*        |      |
| every\*       |      |
| find\*        |      |
| findAll\*     |      |
| findIndexOf\* |      |
| inject\*      |      |
| reverseEach\* |      |
| sort\*        |      |



## Return è¯­å¥

æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä»£ç èŒƒä¾‹ï¼š

```groovy
def isMemberA(item, list) {
    def size = list.size()
    for (index in 0..<size) {
        if (list[index] == item)
            return true
    }
    return false
}

def isMemberB(item, list) {
    list.each {
        if (it == item)
            return true
    }
    return false
}
def numbers = [11, 12, 13, 14]

println isMemberA(15,numbers)
println isMemberA(13,numbers)

println isMemberB(15,numbers)
println isMemberB(13,numbers)  //è¿™ä¸ªæœ‰é—®é¢˜
```

è¾“å‡ºä¸ºï¼š

```console
false
true
false
false
```

æ˜¾ç„¶ï¼ŒGroovyæ–¹å¼çš„è¿”å›æ˜¯æœ‰é—®é¢˜çš„ã€‚è¿™ä¸ªæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

åœ¨æˆ‘ä»¬çš„èŒƒä¾‹ä¸­ï¼Œä½œä¸ºå®å‚çš„é—­åŒ…åŒ…å«ä¸€ä¸ªreturnè¯­å¥ã€‚é—­åŒ…è¿”å›trueï¼Œå°±ä¼šå¯¼è‡´whileå¾ªç¯ç»§ç»­å¤„ç†åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ã€‚

å¯ä»¥çœ‹ä¸€ä¸‹`each`çš„å®ç°æ–¹å¼

```groovy
    public static <T> Iterator<T> each(Iterator<T> self, @ClosureParams(FirstGenericType.class) Closure closure) {
        while(self.hasNext()) {
            Object arg = self.next();
            closure.call(arg);
        }

        return self;
    }
```

å¯ä»¥çœ‹åˆ°returnæ˜¯æŒ‡è¿”å›çš„`closure.call()`ä½†æ˜¯å¤–å±‚å¾ªç¯è¿˜æ˜¯åœ¨çš„ï¼Œå¹¶ä¸èƒ½ç›´æ¥ç»ˆæ­¢å¾ªç¯ï¼Œå› æ­¤æœ€ç»ˆæ‰€æœ‰çš„æ•°éƒ½ä¼šè·‘ä¸€è¾¹ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªæ¯”è¾ƒéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œåœ¨ä½¿ç”¨`each`è¿›è¡Œè¿­ä»£çš„æ—¶å€™ä¸€å®šè¦æ³¨æ„å“¦ï¼



# é«˜çº§é—­åŒ…

> å‡è®¾æŸå®¶è¶…æ—¶ä½¿ç”¨ç‰¹æ®Šçš„å•†å“ä»·æ ¼æ¥å¸å¼•æ–°å®¢æˆ·ï¼Œä»¥åŠç»´æŠ¤å·²ç»æœ‰çš„å®¢æˆ·ã€‚åœ¨ä¸€å‘¨å†…ï¼Œä¹Ÿè®¸æ—©é¤è°·ç±»è§†é¢‘çš„ä»·æ ¼ä¼˜æƒ 1/3ï¼›åœ¨å¦ä¸€å‘¨å†…ï¼Œä¼˜æƒ æ”¿ç­–å¯èƒ½å˜åŒ–ï¼ŒåŒ–å¦†å“é”€å”®æŒ‰ç…§ä¹°ä¸€é€ä¸€çš„æ–¹å¼è¿›è¡Œé”€å”®ã€‚åœ¨è¿™ç§ä¼˜æƒ æ”¿ç­–ç»å¸¸å˜åŒ–çš„ç¯å¢ƒä¸­ï¼Œéœ€è¦æŸç§çµæ´»çš„æ–¹å¼æ¥å®šä¹‰è¿™äº›â€œä¸šåŠ¡è§„åˆ™â€ï¼Œå¹¶ä¸”èƒ½å¤Ÿçµæ´»çš„ä¿®æ”¹å’Œè°ƒæ•´ã€‚
>
> æ­¤å¤„çš„æ€è·¯æ¥æº[å¤šèŒƒå¼ç¼–ç¨‹](https://www.zhihu.com/question/20428688)æ–¹å¼ï¼Œè¿™æ˜¯Groovyçš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ã€‚å€ŸåŠ©æ›´é«˜çº§çš„å‡½æ•°ï¼Œå‡½æ•°ç¼–ç¨‹èŒƒå¼ç»¼åˆäº†å¤šå°ã€ç»„åˆä»¥åŠè®¡ç®—æ¨¡å¼ã€‚



## ç®€å•é—­åŒ…

ä»¥å‰ï¼ŒæŠŠé—­åŒ…æè¿°ä¸ºä¸€ä¸ªä»£ç å—ã€‚é—­åŒ…å®ç°å‚æ•°åŒ–æ›´åŠ æœ‰ä»·å€¼ï¼Œå¯ä»¥è¢«å¼•ç”¨ï¼Œå¯ä»¥è¢«å½“åšå‚æ•°ä¼ å…¥æ–¹æ³•ï¼Œä»¥åŠå¯ä»¥ä¸callæ¶ˆæ¯ä¸€èµ·è¢«è°ƒç”¨ã€‚

èŒƒä¾‹ï¼šè®¡ç®—ä¸¤ä¸ªæ•°å€¼å‚æ•°çš„ä¹˜ç§¯

```groovy
def multiply = {
    x, y ->
        return x * y
}

println "multiply(3,4) = ${multiply(3,4)}"
println "multiply(3.4,5.6) = ${multiply(3.4,5.6)}"
```

ç”±äºé—­åŒ…å¯ä»¥å¼•ç”¨å¯¹è±¡çš„çŠ¶æ€ã€‚

èŒƒä¾‹ï¼šä½œç”¨åŸŸå’Œé—­åŒ…

```groovy
def multiplier = 2 
def multiply = {
    x -> 
        return x * multiplier
}
println "multiply(3) = ${multiply(3)}"
println "multiply(5.6) = ${multiply(5.6)}"

multiplier = 3

println "multiply(3) = ${multiply(3)}"
println "multiply(5.6) = ${multiply(5.6)}"
```

åœ¨é—­åŒ…å®šä¹‰èŒƒå›´å†…çš„å˜é‡å¯ä»¥ä»é—­åŒ…ä»£ç å†…è®¿é—®ã€‚



é—­åŒ…æ˜¯å¯ä»¥å°†å¦ä¸€ä¸ªé—­åŒ…è¿”å›çš„ï¼Œç±»ä¼¼ä¸€ä¸ªäºŒé˜¶çš„å‡½æ•°

èŒƒä¾‹ï¼šé—­åŒ…è¿”å›å€¼

```groovy
def add = {
    x, y ->
        return x + y
}

def subtract = {
    x, y ->
        return x - y
}

def multiply = {
    x, y ->
        return x * y
}

def divide = {
    x, y ->
        return x / y
}

def arithmetic = {
    arith ->
        switch (arith) {
            case 'ADD':
                return add
            case 'SUBTRACT':
                return subtract
            case 'MULTIPLY':
                return multiply
            case 'DIVIDE':
                return divide
            default:
                return add
        }
}

def addOperation = arithmetic('ADD')
def mulOperation = arithmetic('MULTIPLY')

println "addOperation(3,4) = ${addOperation(3,4)}"
println "mulOperation(3,4) = ${mulOperation(3,4)}"
println arithmetic('DIVIDE')(3,4)
```



## éƒ¨åˆ†åº”ç”¨

åœ¨ä¸Šé¢çš„èŒƒä¾‹2ä¸­ï¼Œmultiplyé—­åŒ…è®¡ç®—ä¸€ä¸ªå‚æ•°å’Œå†…éƒ¨å˜é‡multiplierçš„ä¹˜ç§¯ã€‚ç°åœ¨ï¼Œå¦‚æœæŠŠmultiplierä½œä¸ºé—­åŒ…çš„å‚æ•°ï¼Œè¿™ä¸ªé—­åŒ…è¿”å›multiplyé—­åŒ…ï¼Œåè€…è®¡ç®—è‡ªå·±çš„å‚æ•°ä¸multiplierçš„æˆç»©ï¼Œè¿™å°±æ˜¯é—­åŒ…éƒ¨åˆ†åº”ç”¨çš„èŒƒä¾‹ã€‚

èŒƒä¾‹ï¼špartial applicaiton

```groovy
def multiply = {
    x, y ->
        return x * y
}

def tripple = multiply.curry(3)
def quadroup = multiply.curry(4)

def twelve = multiply.curry(3,4)
println tripple(3)
println quadroup(5)
println twelve()
```

**æ³¨æ„ï¼šè¡¨è¾¾å¼`multiply.curry(3)`**è¡¨ç¤ºæŠŠå‚æ•°ä¹˜ä»¥3çš„é—­åŒ…ã€‚ç„¶åï¼Œè¢«è¿”å›çš„é—­åŒ…ä½¿ç”¨ä¸€ä¸ªå‚æ•°è¿›è¡Œè°ƒç”¨ã€‚åœ¨æ•°å­¦å®¶Haskell Curryä¹‹åï¼Œé—­åŒ…çš„éƒ¨åˆ†åº”ç”¨è¢«ç§°ä¸ºä¿®æ­£ã€‚é—­åŒ…`triple`çš„å®šä¹‰å¦‚ä¸‹ï¼š

```groovy
def triple = {
    y ->
  		return 3 * y
}
```

å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¢«åˆ é™¤ï¼Œæ‰€æœ‰å‡ºç°ç¬¬ä¸€ä¸ªå‚æ•°çš„åœ°æ–¹ä½¿ç”¨æ•°å­—3æ¥æ›¿ä»£ã€‚

åŠ æ³•å’Œæƒ©ç½šè¢«ç§°ä¸ºå¯äº¤æ¢æ“ä½œã€‚è¿™æ„å‘³ç€`A+B = B+A and A*B = B*A`ã€‚ä½†æ˜¯å‡æ³•å’Œé™¤æ³•æ˜¯ä¸å¯äº¤æ¢çš„æ“ä½œã€‚æˆ‘ä»¬å¯ä»¥äº‹ä»¶ç±»ä¼¼äºmultiplyçš„é—­åŒ…ã€‚

èŒƒä¾‹ï¼šå®ç°å¯äº¤æ¢æ“ä½œ

```groovy
def rSubtract = {
    y, x ->
        return x - y
}
def lSubtract = {
    x, y ->
        return x - y
}
def subtract10 = rSubtract.curry(10)
def subractFrom20 = lSubtract.curry(20)

println subtract10(22)
println subractFrom20(14)
```

å…³äºä¿®æ­£é—­åŒ…çš„ä¸€ä¸ªé‡ç‚¹æ˜¯ï¼š`curry`æ–¹æ³•çš„å®å‚æ•°é‡ç»å¯¹ä¸èƒ½è¶…è¿‡è¯¥å¿…æŠ¥æ‰€éœ€çš„å®å‚å®é™…æ•°é‡ã€‚æ¯”å¦‚è¯¥é—­åŒ…æœ‰æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ™è°ƒç”¨curryæ–¹æ³•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é›¶ä¸ªï¼Œä¸€ä¸ªï¼Œä¸¤ä¸ªï¼Œæˆ–è€…ä¸‰ä¸ªå®å‚ã€‚

éƒ¨åˆ†åº”ç”¨å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§ç®€åŒ–å½¢å¼ï¼Œæ˜¯ä¸ªå¤æ‚ä»»åŠ¡å¯ä»¥è¢«åˆ†è§£ä¸ºå¤šä¸ªå­ä»»åŠ¡ã€‚



## ç»„åˆ

ç»“æ„åŒ–é¡ºåºçš„ä¸€ç§ç»„ç»‡æ–¹å¼æ˜¯é¡ºåºæ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚é€šå¸¸è€Œè¨€ï¼Œæ¯éƒ¨åˆ†ä»»åŠ¡è¢«åˆ†åˆ«è®¾è®¡å’Œå®ç°ã€‚åœ¨æ­¤ï¼Œä¹Ÿè®¸è®¤ä¸ºï¼Œä¸€ä¸ªé—­åŒ…æ ‡è¯†éœ€è¦æ‰§è¡Œçš„æŸä¸ªç®€å•ä»»åŠ¡ã€‚é€‚ç”¨ç»„åˆæ¦‚å¿µè¿›è¡Œä»»åŠ¡åˆå¹¶ï¼Œå¯ä»¥éå¸¸å®¹æ˜“æ„é€ å‡ºå¤æ‚çš„ä»»åŠ¡ã€‚å¹¶ä¸”ï¼Œå€ŸåŠ©ä¸åŒçš„ç¥è´ºæ–¹å¼ï¼Œå¯ä»¥è¾ƒå¿«çš„åˆ›å»ºè¶…æ—¶æ‰€éœ€è¦çš„æ–°ä»»åŠ¡ï¼Œæœ¬æ–‡å¼€ç¯‡æ‰€è¿°æ¡ˆä¾‹ã€‚

èŒƒä¾‹ï¼šé—­åŒ…ç»„åˆ

èŒƒä¾‹æ¼”ç¤ºäº†compositioné—­åŒ…ï¼Œè¿™ä¸ªé—­åŒ…æœ‰ä¸¤ä¸ªå‚æ•°få’Œgï¼Œä¸¤ä¸ªå‚æ•°ä»£è¡¨é—­åŒ…ï¼ŒæŠŠé—­åŒ…gåº”ç”¨åˆ°xæ¯”å¦‚`g(x)`ï¼ŒæŠŠé—­åŒ…fåº”ç”¨åˆ°å¤„ç†ç»“æœæ¯”å¦‚`(fg(x))`

```groovy
def composition = {
    f, g, x ->
        println "f:${f.class} g: ${g.class} x: ${x.class}"
        return f(g(x))
}

def composition2 = {
    f, g, x ->
        return f(x) * g(x)
}

def multiply = {
    x, y ->
        return x * y
}

def triple = multiply.curry(3)
def quadroup = multiply.curry(4)

def twelveTimes = composition.curry(triple, quadroup)
def multiplyCompo = composition2.curry(triple,quadroup)

println "twelveTimes(12) = ${twelveTimes(12)}" //(3*(4 * 12)) = 144
println "multiplyCompo(12) = ${multiplyCompo(12)}" // 3*12 * 4*12 = 1728

```

é—­åŒ…`triple`æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¹¶æŠŠè¿™ä¸ªå‚æ•°ä¸3ç›¸ä¹˜ã€‚é—­åŒ…`twelveTimes`æ˜¯é—­åŒ…`tripeå’Œquadroup`çš„ç»„åˆã€‚ç»“æœæ˜¯ï¼Œé—­åŒ…`twelveTimes`æŠŠå‚æ•°ä¹˜ä»¥4ï¼Œç„¶åæŠŠä¹˜æ³•ç»“æœä¸3ç›¸ä¹˜ã€‚

èŒƒä¾‹ï¼šç»„åˆä¸é›†åˆ

```groovy
def composition = {
    f, g, x ->
        return f(g(x))
}

def multiply = {
    x, y ->
        return x * y
}

def triple = multiply.curry(3)
def quadroup = multiply.curry(4)

def twelveTimes = composition.curry(triple,quadroup)

def table = [1,2,3,4].collect{
    element ->
        return twelveTimes(element)
}
println "tabl = $table "
```



## è®¡ç®—æ¨¡å¼

> ä»‹ç»ä¸€ç§æœºåˆ¶ï¼Œæ˜¯çš„é—­åŒ…åŒ…å«ä¸€ç§è®¡ç®—æ¨¡å¼ã€‚

èŒƒä¾‹æ˜¯å¯¹åˆ—è¡¨ä¸­çš„æ¯ä¸ªå…ƒç´ æŒ‰ç…§æŸä¸­å½¢å¼è¿›è¡Œè½¬æ¢ã€‚è¿™ç§è½¬æ¢é€šå¸¸è¢«å‘½åä¸º`map`ã€‚

èŒƒä¾‹ï¼šæ˜ å°„

```groovy
//map closure
def map = {
    clos, list ->
        return list.collect(clos)
}

//composition closure
def compositon = {
    f ,g ,x ->
        return f(g(x))
}

def multiply = {
    x , y ->
        return x * y
}

def triple = multiply.curry(3)
def quadroup = multiply.curry(4)

def tripleAll = map.curry(triple)


def table = tripleAll([1,2,3,4])
println table
```

åˆ†æï¼š

```groovy
//å®é™…çš„trpleAllå°†æ˜¯ä¸€ä¸ªCurryedClosure
//quadroupçš„ç»“æ„
quadroup = {
    list -> 
  		return list.collect{
      		element ->
          		return 3 * element 
  		}
}
```



å…³äºæ˜ å°„çš„ä¸€ä¸ªç­‰çº§æ¨¡å¼æ˜¯ï¼Œå¦‚æœæŠŠé—­åŒ…ï¼ˆæ¯”å¦‚fï¼‰æ˜ å°„åˆ°åˆ—è¡¨xï¼Œç„¶åæŠŠé—­åŒ…ï¼ˆæ¯”å¦‚gï¼‰åº”ç”¨åˆ°å‰ä¸€ä¸ªé—­åŒ…çš„å¤„ç†ç»“æœã€‚é‚£ä¹ˆä¸Šè¿°è¿‡ç¨‹å°±ç­‰ä»·äºæŠŠgå’Œfçš„ç»„åˆåº”ç”¨åˆ°è¿™ä¸ªåˆ—è¡¨xã€‚

èŒƒä¾‹ï¼šå¤„ç†ç­‰ä»·å…³ç³»

```groovy
//map closure
def map = {
    clos, list ->
        return list.collect(clos)
}

//composition closure
def compositon = {
    f, g, x ->
        return f(g(x))
}

def multiply = {
    x, y ->
        return x * y
}

def triple = multiply.curry(3)
def quadroup = multiply.curry(4)

def composeMapMap = compositon.curry(map.curry(triple), map.curry(quadroup))

def table = composeMapMap([1,2,3,4]) // each element * 4 * 3

println table
```



## ä¸šåŠ¡è§„åˆ™

> ç°åœ¨æˆ‘ä»¬è€ƒè™‘å¦‚ä½•è®¡ç®—ä¸€ä¸ªBookçš„å‡€ä»·ï¼Œåœ¨è®¡ç®—è¿‡ç¨‹è¦è€ƒè™‘åˆ°ä¸Šå“æŠ˜æ‰£å’Œæ”¿åºœç¨é‡‘ï¼Œæ¯”å¦‚å¢å€¼ç¨ã€‚

å…³äºä¸šåŠ¡è§„åˆ™çš„å®é™…å®ç°

èŒƒä¾‹ï¼šå‡€ä»·è®¡ç®—

```groovy
class Book {
    def name
    def author
    def price
    def category
}

def bk = new Book(name: 'Groovy', author: 'KenB', price: 25, category: 'CompSci') // å‚æ•°åˆ—è¡¨åˆå§‹åŒ–

def discountRate = 0.1
def taxRate = 0.17

def rMultiply = {
    y , x ->
        return x * y
}

def lMultiply = {
    x , y ->
        return x * y
}

def composition = {
    f,g,x ->
        return f(g(x))
}

def calDiscounteedPrice = rMultiply.curry(1-discountRate)
def calTax = rMultiply.curry(1 + taxRate)
def calcNetPrice = composition.curry(calTax,calDiscounteedPrice)

def netPrice = calcNetPrice(bk.price)

println "netPrice = ${netPrice}"
```



èŒƒä¾‹ï¼šæœ‰ä¸Šé™æŠ˜æ‰£

```groovy
class Book {
    def name
    def author
    def price
    def category
}

def bk = new Book(name: 'Groovy', author: 'KenB', price: 25, category: 'CompSci')

def discountRate = 0.1
def taxRate = 0.17
def maxDiscount = 3

def rMultiply = {
    y, x ->
        return x * y
}

def lMultiply = {
    x, y ->
        return x * y
}

def subtract = {
    x, y ->
        return x - y
}

def rSubtract = {
    y, x ->
        return x - y
}

def lSubtract = {
    x, y ->
        return x - y
}

def min = {
    x, y ->
        return x < y ? x : y
}

def id = {
    x ->
        return x
}

def composition = {
    f, g, x ->
        return f(g(x))
}

def bComposition = {
    h, f, g, x ->
        return h(f(x), g(x))
}

def calcDiscount = rMultiply.curry(discountRate)
def calcActuralDiscount = bComposition.curry(min, calcDiscount, id)
def calcDiscountedPrice = bComposition.curry(subtract, id, calcActuralDiscount)
def calcTax = rMultiply.curry(1 + taxRate)
def calcNetPrice = composition.curry(calcTax,calcDiscountedPrice)

println "bk.price : $bk.price"

def netPrice = calcNetPrice(bk.price)

println "netprice = $netPrice"
```



## æ‰“åŒ…

ä»¥ä¸ŠèŒƒä¾‹å¼€å‘äº†å¤§é‡éå¸¸æœ‰ä»·å€¼çš„é—­åŒ…ï¼Œå¯ä»¥éå¸¸çµæ´»çš„åˆå¹¶ä½¿ç”¨ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦æŠŠè¿™äº›é—­åŒ…éƒ½æ‰“åŒ…åˆ°ä¸€ä¸ªç±»ä¸­å»ï¼Œè¿™æ ·æ›´åŠ å®¹æ˜“å¼•å…¥åˆ°åº”ç”¨ç¨‹åºã€‚

```groovyy
abstract class Functor {
    public static Closure bAdd = {
        x, y -> return x + y
    }

    public static Closure rAdd = {
        y, x -> return x + y
    }
    
    public static Closure bSubtract = {
        x , y -> return x - y
    }
    //blabla
}

```

è¿™ä¸ªç±»åŒ…å«äº†ç®—æ•°çš„é—­åŒ…ã€‚



## é—­åŒ…ä¸åç¨‹

è°ƒç”¨ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ä¼šåœ¨ç¨‹åºçš„æ‰§è¡Œåºåˆ—åˆ›å»ºä¸€ä¸ªæ–°çš„ä½œç”¨åŸŸ.æˆ‘ä»¬ä¼šåœ¨ä¸€ä¸ªå…¥å£ç‚¹è¿›å…¥å‡½æ•°.åœ¨æ–¹æ³•å®Œæˆä¹‹å,å›åˆ°è°ƒç”¨è€…çš„ä½œç”¨åŸŸ.

åç¨‹(Coroutine)åˆ™æ”¯æŒå¤šä¸ªå…¥å£ç‚¹,æ¯ä¸ªå…¥å£ç‚¹éƒ½æ˜¯ä¸Šæ¬¡æŒ‚èµ·è°ƒç”¨çš„ä½ç½®.æˆ‘ä»¬å¯ä»¥è¿›å…¥ä¸€ä¸ªå‡½æ•°,æ‰§è¡Œéƒ¨åˆ†ä»£ç ,æŒ‚èµ·,åœ¨å›åˆ°è°ƒç”¨è€…çš„ä¸Šä¸‹æ–‡æˆ–ä½œç”¨åŸŸå†…æ‰§è¡Œä¸€äº›ä»£ç .ä¹‹åæˆ‘ä»¬å¯ä»¥åœ¨æŒ‚èµ·çš„åœ°æ–¹æ¢å¤è¯¥å‡½æ•°çš„æ‰§è¡Œ.

å†™æˆå¯¹äºå®ç°æŸäº›ç‰¹æ®Šçš„é€»è¾‘æˆ–ç®—æ³•éå¸¸æ–¹ä¾¿,æ¯”å¦‚ç”¨ç€ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ä¸­.ç”Ÿäº§è€…ä¼šæ¥å—ä¸€äº›è¾“å…¥,å¯¹è¾“å…¥åšä¸€äº›å¨å¸ˆå¤„ç†,é€šçŸ¥æ¶ˆè´¹è€…æ‹¿èµ°å¤„ç†è¿‡çš„å€¼å¹¶åšè¿›ä¸€æ­¥è®¡ç®—,å¹¶è¾“å‡ºæˆ–å­˜å‡ºç»“æœ.æ¶ˆè´¹è€…å¤„ç†å®ƒé‚£éƒ¨åˆ†å·¥ä½œ,å®Œæˆä¹‹åé€šçŸ¥ç”Ÿäº§è€…ä»¥è·å–æ›´å¤šè¾“å…¥.

åœ¨Javaä¸­,`wait() and notify()`ä¸å¤šçº¿ç¨‹å€Ÿä¸ªä½¿ç”¨,å¯ä»¥å®ç°åç¨‹.é—­åŒ…ä¼šè®©äººäº§ç”Ÿ"åç¨‹æ˜¯åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œ"çš„æ„Ÿè§‰oré”™è§‰.

```groovy
def iterate(n, closure){
    1.upto(n){
        println "In iterate with value ${it}"
        closure(it)
    }
}

println "Calling iterate"
total = 0
iterate(4){
    total += it
    println "In closure total so far is ${total}"
}
println "Done"
/**
æ¯æ¬¡è°ƒç”¨é—­åŒ…,æˆ‘ä»¬éƒ½ä¼šä»ä¸Šä¸€æ¬¡è°ƒç”¨ä¸­å›å¤totalçš„å€¼.  //å¯æ˜¯æˆ‘å¹¶æ²¡æœ‰ä»ä¾‹å­ä¸­çœ‹å‡ºä»€ä¹ˆæ˜¯åç¨‹????
*/
```

åç¨‹ä¸æ˜¯è¿›ç¨‹æˆ–çº¿ç¨‹ï¼Œå…¶æ‰§è¡Œè¿‡ç¨‹æ›´ç±»ä¼¼äºå­ä¾‹ç¨‹ï¼Œæˆ–è€…è¯´ä¸å¸¦è¿”å›å€¼çš„[å‡½æ•°è°ƒç”¨](https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8/4127405)ã€‚ åç¨‹è¿˜æ˜¯æ¯”è¾ƒå¤æ‚,å—¯åç»­åœ¨ç ”ç©¶ç ”ç©¶.

## é—­åŒ…å§”æ‰˜

Groovyçš„é—­åŒ…æ”¯æŒæ–¹æ³•å§”æ‰˜,è€Œä¸”æä¾›äº†æ–¹æ³•åˆ†æ´¾èƒ½åŠ›.

`this,owner and delegate`æ˜¯é—­åŒ…çš„ä¸‰ä¸ªå±æ€§,ç”¨äºç¡®å®šæœ‰é‚£ä¸ªå¯¹è±¡å¤„ç†é—­åŒ…å†…çš„æ–¹æ³•è°ƒç”¨,ä¸€èˆ¬è€Œè¨€,`delegate ä¼šè¢«è®¾ç½®ä¸º owner`,ä½†æ˜¯å¯¹å…¶è¿›è¡Œä¿®æ”¹,å¯ä»¥æœ‰éå¸¸å¥½çš„å…ƒç¼–ç¨‹èƒ½åŠ›.

åˆ©ç”¨é—­åŒ…å§”æ‰˜,å¯ä»¥æ›´å¥½çš„å†™å‡ºDSL,å°†åœ¨DSLå¥½å¥½çš„è®²è¿°æœ¬å†…å®¹.





# é¢˜å¤–è¯



æœ‰å…³å‡½æ•°å¼ç¼–ç¨‹ï¼Œå¯å‚è€ƒé˜®ä¸€å³°è€å¸ˆçš„åšå®¢ï¼Œåœ¨è¿™é‡Œå¼•ç”¨é˜®ä¸€å³°è€å¸ˆçš„åšå®¢ï¼Œç‰¹æ­¤æ³¨æ˜ï¼Œå¹¶éå¸¸æ„Ÿè°¢è€å¸ˆèƒ½å¤Ÿå‡ºä¸€ç‰‡æ•™ç¨‹ç»™å¤§å®¶ç§‘æ™®ä¸€ä¸‹ã€‚

[å‡½æ•°å¼ç¼–ç¨‹å…¥é—¨æ•™ç¨‹--é˜®ä¸€å³°](http://www.ruanyifeng.com/blog/2017/02/fp-tutorial.html)

ps:è‡ªå·±çš„ä¸€äº›ç†è§£

å¯¹äºå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æŸ¯é‡ŒåŒ–ï¼Œå¯¹åº”é«˜ä¸­æ•°å­¦çš„åªæ˜¯ï¼Œå…¶å®å°±æ˜¯å‡½æ•°çš„ä¸€ä¸ªç»„åˆã€‚ä¸ºäº†ç»„åˆå‡½æ•°ï¼Œéœ€è¦å°†å¤šä¸ªå¤šå‚æ•°å‡½æ•°è½¬æ¢æˆå•å‚æ•°å‡½æ•°ã€‚

ä¸¾ä¸ªğŸŒ°ï¼š
$$
z = x + y
$$

$$
z = x * y
$$

å¦‚æœæˆ‘æƒ³å¾—åˆ°ä¸€ä¸ªå¤åˆå‡½æ•°ä½¿å¾—2->æ˜ å°„åˆ°8ï¼Œè®¡ç®—è¿‡ç¨‹ä¸º`2 * 3 + 2`

é‚£ä¹ˆæˆ‘æ€ä¹ˆå¾—åˆ°è¿™ä¸ªå‡½æ•°å‘¢ï¼Ÿå®šä¹‰è¿™ä¸ªæ˜ å°„ä¸ºf
$$
f(x) = x * 3  +  2
$$
é‚£ä¹ˆåœ¨ç¨‹åºä¸­æˆ‘ä»¬æ€ä¹ˆä½“ç°å‘¢

```groovy
//è¿™é‡Œçš„å‡½æ•°éƒ½æ˜¯ä»¥é—­åŒ…å½¢å¼è¡¨ç¤ºçš„å‡†ç¡®æ¥è¯´è¿™ä¸æ˜¯ä¸€ä¸ª"æ–¹æ³•",è€Œæ˜¯ä¸€ä¸ªé—­åŒ…çš„å¯¹è±¡
//é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªåŠ æ³•å‡½æ•°ï¼Œè¿™ä¸ªåŠ æ³•å‡½æ•°æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„
def add = {
    x, y ->
        return x + y
}
//ç„¶åæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¹˜æ³•å‡½æ•°,åŒæ ·æ˜¯ä¸€ä¸ªå¹¿ä¹‰çš„
def multiple = {
    x, y ->
        return x * y
}
//ç„¶åæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»„åˆ,è¿™ä¸ªç»„åˆæ˜¯åµŒå¥—å‡½æ•°,ä¸¤ä¸ªæ˜ å°„f,gå’Œä¸€ä¸ªè‡ªå˜é‡x
def compose = {
    f, g, x ->
        return f(g(x))
}

//add.curry(2)  :  y = 2 + z
//multiple.curry(2)  : z = 3 * x æ³¨:è¿™é‡Œåªæ˜¯ä¸ºäº†æ–¹ä¾¿,å˜é‡åå¹¶ä¸ä»£è¡¨å¸¦å…¥å…³ç³»
//compose.curry(add2,multiple3) = : z = 2 + (3 * x)
def add2 = add.curry(2)
def multiple3 = multiple.curry(3)

def addAndMultiple = compose.curry(add2,multiple3)
println addAndMultiple(2)
```

