---
layout:     post
title:      "Picasso源码分析1"
subtitle:   "图片库源码分析"
date:       2019-05-08 11:19:00
author:     "LeoHe"
header-img: "img/post-bg-2015.jpg"
tags:
    - Android
    - open source library
    - Java
    - 源码分析	
    - 图片库
---



[TOC]

#Picasso使用指南

## Introduction

一行代码搞定图片加载

```java
Picasso.get().load("http://i.imgur.com/DvpvklR.png").into(imageView);
```

在`Android`上许多常见图片加载陷阱都将自动的被`Picasso`处理.

1. 处理`ImageView`回收和下载取消
2. 使用少量内存就能够处理复杂的图片变化`Image Transformations`
3. 自动内存和磁盘缓存

## Features

### ADAPTER DOWNLOADS

```java
@Override 
public void getView(int position, View convertView, ViewGroup parent) {
  SquaredImageView view = (SquaredImageView) convertView;
  if (view == null) {
    view = new SquaredImageView(context);
  }
  String url = getItem(position);

  Picasso.get().load(url).into(view);
}
```

### IMAGETRANSFORMATIONS

变换图片适应大小

```java
Picasso.get()
  .load(url)
  .resize(50, 50)
  .into(imageView);
```

也可以使用自定义变换

```java


public class CropSquareTransformation implements Transformation {
  @Override public Bitmap transform(Bitmap source) {
    int size = Math.min(source.getWidth(), source.getHeight());
    int x = (source.getWidth() - size) / 2;
    int y = (source.getHeight() - size) / 2;
    Bitmap result = Bitmap.createBitmap(source, x, y, size, size);
    if (result != source) {
      source.recycle();
    }
    return result;
  }

  @Override public String key() { return "square()"; }
}

//调用Picasso实例的transform方法来应用形变
```



### PLACEHOLDERS

`Picasso`支持站位符

```java
Picasso.get()
  .load(url)
  .placeholder(R.drawable.?) //加载站位符
  .error(R.drawable.?) //错误站位符
  .into(imageView)
```



### RESOURCE LOADING

`Resource, assets, files, content providers` supported

```java
Picasso.get().load(R.drawable.?).into(imageView);
Picasso.get().load("file://android_asset/?").into(imageView);
Picasso.get().load(new File()).into(imageView);
```

